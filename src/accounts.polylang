collection Accounts {
	id: string;
	name: string;
	publicKey: string;
	username?: string;

	@index(publicKey, username);

	function constructor(name: string, username?: string) {
		this.id = "generate ksuid";
		this.name = name;
		this.publicKey = ctx.publicKey;

		if (username) {
			this.username = username;
		}
	}

	function auth(): string {
		if (this.publicKey == ctx.publicKey) {
			return this.id;
		} else {
			throw error('invalid public key');
		}
	}
}
